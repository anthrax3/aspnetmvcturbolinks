(function(){var y,i,p,w,u,f,e,b,o,k,n,d,s,g,nt,tt,h,c,it,l,rt,ut,ft,et,ot,r,st,a,ht,ct,lt,at,vt,yt,pt,wt,t,v,bt=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};l=!1,n=null,a=document.location.href,i=[],r=[],o=null,v=function(n){return u?(f(),ht(n),h(n)):document.location.href=n},h=function(n){var i,r=this;return t("page:fetch"),i=new XMLHttpRequest,i.open("GET",n,!0),i.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),i.setRequestHeader("X-XHR-Referer",a),i.onload=function(){var r;return r=o(i.responseText),p(r)?document.location.href=n:(e.apply(null,nt(r)),ct(i),pt(),t("page:load"))},i.onabort=function(){return console.log("Aborted turbolink fetch!")},i.send()},tt=function(n){var i;return f(),(i=r[n.position])?(e(i.title,i.body),st(i),t("page:restore")):h(document.location.href)},f=function(){return yt(),r[n.position]={url:document.location.href,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset},b(10)},b=function(t){return delete r[n.position-t]},e=function(i,r){return document.title=i,document.documentElement.replaceChild(r,document.body),d(),n=window.history.state,t("page:change")},d=function(){var script,_i,_len,_ref,_ref1,_results;for(_ref=document.body.getElementsByTagName("script"),_results=[],_i=0,_len=_ref.length;_i<_len;_i++)script=_ref[_i],((_ref1=script.type)===""||_ref1==="text/javascript")&&_results.push(eval(script.innerHTML));return _results},ht=function(t){if(t!==document.location.href)return a=document.location.href,window.history.pushState({turbolinks:!0,position:n.position+1},"",t)},ct=function(t){var i;if(i=t.getResponseHeader("X-XHR-Current-Location"))return window.history.replaceState(n,"",i)},vt=function(){return window.history.replaceState({turbolinks:!0,position:window.history.length-1},"",document.location.href)},at=function(){return n=window.history.state},lt=function(){return i=s(document)},yt=function(){if(!l)return vt(),at(),o=w(),l=!0},st=function(n){return window.scrollTo(n.positionX,n.positionY)},pt=function(){return window.scrollTo(0,0)},t=function(n){var t;return t=document.createEvent("Events"),t.initEvent(n,!0,!0),document.dispatchEvent(t)},s=function(n){var t,i,f,r,u;for(r=n.head.childNodes,u=[],i=0,f=r.length;i<f;i++)t=r[i],(t.src||t.href)&&u.push(t.src||t.href);return u},p=function(n){return ut(s(n),i).length!==i.length},ut=function(n,t){var r,i,e,u,f;for(n.length>t.length&&(u=[t,n],n=u[0],t=u[1]),f=[],i=0,e=n.length;i<e;i++)r=n[i],bt.call(t,r)>=0&&f.push(r);return f},nt=function(n){var t;return t=n.querySelector("title"),[t!=null?t.textContent:void 0,n.body]},w=function(){var n,i,t,r;return n=function(n){return(new DOMParser).parseFromString(n,"text/html")},i=function(n){var t;return t=document.implementation.createHTMLDocument(""),t.open("replace"),t.write(n),t.close,t},window.DOMParser&&(t=n("<html><body><p>test")),(t!=null?(r=t.body)!=null?r.childNodes.length:void 0:void 0)===1?n:i},rt=function(n){if(!n.defaultPrevented)return document.removeEventListener("click",c),document.addEventListener("click",c)},c=function(n){var t;if(!n.defaultPrevented&&(t=g(n),t.nodeName==="A"&&!it(n,t)))return v(t.href),n.preventDefault()},g=function(n){for(var t=n.target;!(t===document||t.nodeName==="A");)t=t.parentNode;return t},wt=function(n){return n.href===document.location.href},k=function(n){return location.protocol!==n.protocol||location.host!==n.host},y=function(n){return(n.hash&&n.href.replace(n.hash,""))===location.href.replace(location.hash,"")||n.href===location.href+"#"},et=function(n){return n.href.match(/\.[a-z]+(\?.*)?$/g)&&!n.href.match(/\.html?(\?.*)?$/g)},ft=function(n){for(var t;!(t||n===document);)t=n.getAttribute("data-no-turbolink")!=null,n=n.parentNode;return t},ot=function(n){return n.which>1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey},it=function(n,t){return k(t)||y(t)||et(t)||ft(t)||ot(n)},u=window.history&&window.history.pushState&&window.history.replaceState&&window.history.state!==void 0,u&&(lt(),document.addEventListener("click",rt,!0),window.addEventListener("popstate",function(n){var t;if((t=n.state)!=null?t.turbolinks:void 0)return tt(n.state)})),this.Turbolinks={visit:v}}).call(this);